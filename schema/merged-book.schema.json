{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/somnath4/cs598-fdc-literary-awards/schema/merged-book.schema.json",
  "title": "Merged Literary Books Dataset",
  "description": "Schema for the integrated dataset combining awards, ratings, and bestseller data",
  "type": "object",
  "required": ["metadata", "books"],
  "properties": {
    "metadata": {
      "type": "object",
      "description": "Dataset-level metadata and provenance",
      "properties": {
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of merge operation"
        },
        "sources": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of source datasets integrated"
        },
        "merge_algorithm": {
          "type": "string",
          "description": "Description of entity resolution method"
        },
        "total_books": {
          "type": "integer",
          "description": "Number of unique books in merged dataset"
        },
        "statistics": {
          "type": "object",
          "description": "Summary statistics of the merge operation"
        }
      }
    },
    "books": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/MergedBook"
      }
    }
  },
  "$defs": {
    "MergedBook": {
      "type": "object",
      "required": ["title", "author", "sources"],
      "properties": {
        "title": {
          "type": "string",
          "description": "Book title (normalized)"
        },
        "author": {
          "type": "string",
          "description": "Primary author name (normalized)"
        },
        "year": {
          "type": ["integer", "null"],
          "description": "Publication year"
        },
        "isbn_all": {
          "type": "array",
          "items": { "type": "string" },
          "description": "All ISBN variants collected from all sources"
        },
        "isbn_13": {
          "type": ["string", "null"],
          "pattern": "^[0-9]{13}$",
          "description": "Primary ISBN-13"
        },
        "isbn_10": {
          "type": ["string", "null"],
          "pattern": "^[0-9X]{10}$",
          "description": "Primary ISBN-10"
        },
        "identifiers": {
          "type": "object",
          "description": "External identifiers from various sources",
          "properties": {
            "google_books_id": {
              "type": ["string", "null"],
              "description": "Google Books volume ID"
            },
            "openlibrary_key": {
              "type": ["string", "null"],
              "description": "Open Library work key"
            }
          }
        },
        "awards": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "award": { "type": "string" },
              "year": { "type": "integer" },
              "status": { "type": "string" }
            }
          },
          "description": "Literary awards received"
        },
        "award_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Total number of award recognitions"
        },
        "won_award": {
          "type": "boolean",
          "description": "Whether the book won at least one award"
        },
        "shortlisted": {
          "type": "boolean",
          "description": "Whether the book was shortlisted/finalist"
        },
        "ratings_average": {
          "type": ["number", "null"],
          "minimum": 1,
          "maximum": 5,
          "description": "Average reader rating from Open Library (1-5)"
        },
        "ratings_count": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Number of reader ratings"
        },
        "want_to_read_count": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Open Library want-to-read count"
        },
        "currently_reading_count": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Open Library currently-reading count"
        },
        "already_read_count": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Open Library already-read count"
        },
        "bestseller_appearances": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Number of times on NYT bestseller list"
        },
        "total_weeks_on_bestseller": {
          "type": ["integer", "null"],
          "minimum": 0,
          "description": "Total weeks on NYT bestseller lists"
        },
        "highest_rank": {
          "type": ["integer", "null"],
          "minimum": 1,
          "description": "Highest position achieved on bestseller list"
        },
        "bestseller_dates": {
          "type": ["array", "null"],
          "items": { "type": "string", "format": "date" },
          "description": "Dates when book appeared on bestseller list"
        },
        "publisher": {
          "type": ["string", "null"],
          "description": "Publisher name"
        },
        "page_count": {
          "type": ["integer", "null"],
          "minimum": 1,
          "description": "Number of pages"
        },
        "categories": {
          "type": ["array", "null"],
          "items": { "type": "string" },
          "description": "Subject categories"
        },
        "description": {
          "type": ["string", "null"],
          "description": "Book description"
        },
        "language": {
          "type": ["string", "null"],
          "description": "Language code"
        },
        "sources": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "pulitzer_prize",
              "national_book_award",
              "booker_prize",
              "google_books",
              "openlibrary",
              "nyt_bestsellers"
            ]
          },
          "minItems": 1,
          "description": "Data sources this record was derived from (provenance)"
        }
      }
    }
  }
}

